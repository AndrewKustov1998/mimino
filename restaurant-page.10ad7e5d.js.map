{"mappings":"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","sources":["src/script.js"],"sourcesContent":["let slider = document.querySelector('.slider'),\n  sliderList = slider.querySelector('.slider-list'),\n  sliderTrack = slider.querySelector('.slider-track'),\n  slides = slider.querySelectorAll('.slide'),\n  arrows = slider.querySelector('.slider-arrows'),\n  prev = arrows.children[0],\n  next = arrows.children[1],\n  slideWidth = slides[0].offsetWidth,\n  slideIndex = 0,\n  posInit = 0,\n  posX1 = 0,\n  posX2 = 0,\n  posY1 = 0,\n  posY2 = 0,\n  posFinal = 0,\n  isSwipe = false,\n  isScroll = false,\n  allowSwipe = true,\n  transition = true,\n  nextTrf = 0,\n  prevTrf = 0,\n  lastTrf = --slides.length * slideWidth,\n  posThreshold = slides[0].offsetWidth * 0.35,\n  trfRegExp = /([-0-9.]+(?=px))/,\n  swipeStartTime,\n  swipeEndTime,\n  getEvent = function () {\n    return event.type.search('touch') !== -1 ? event.touches[0] : event;\n  },\n  slide = function () {\n    if (transition) {\n      sliderTrack.style.transition = 'transform .5s';\n    }\n    sliderTrack.style.transform = `translate3d(-${\n      slideIndex * slideWidth + slideIndex\n    }px, 0px, 0px)`;\n\n    prev.classList.toggle('disabled', slideIndex === 0);\n    next.classList.toggle('disabled', slideIndex === --slides.length);\n  },\n  swipeStart = function () {\n    let evt = getEvent();\n\n    if (allowSwipe) {\n      swipeStartTime = Date.now();\n\n      transition = true;\n\n      nextTrf = (slideIndex + 1) * -slideWidth;\n      prevTrf = (slideIndex - 1) * -slideWidth;\n\n      posInit = posX1 = evt.clientX;\n      posY1 = evt.clientY;\n\n      sliderTrack.style.transition = '';\n\n      document.addEventListener('touchmove', swipeAction);\n      document.addEventListener('mousemove', swipeAction);\n      document.addEventListener('touchend', swipeEnd);\n      document.addEventListener('mouseup', swipeEnd);\n\n      sliderList.classList.remove('grab');\n      sliderList.classList.add('grabbing');\n    }\n  },\n  swipeAction = function () {\n    let evt = getEvent(),\n      style = sliderTrack.style.transform,\n      transform = +style.match(trfRegExp)[0];\n\n    posX2 = posX1 - evt.clientX;\n    posX1 = evt.clientX;\n\n    posY2 = posY1 - evt.clientY;\n    posY1 = evt.clientY;\n\n    if (!isSwipe && !isScroll) {\n      let posY = Math.abs(posY2);\n      if (posY > 7 || posX2 === 0) {\n        isScroll = true;\n        allowSwipe = false;\n      } else if (posY < 7) {\n        isSwipe = true;\n      }\n    }\n\n    if (isSwipe) {\n      if (slideIndex === 0) {\n        if (posInit < posX1) {\n          setTransform(transform, 0);\n          return;\n        } else {\n          allowSwipe = true;\n        }\n      }\n\n      // запрет ухода вправо на последнем слайде\n      if (slideIndex === --slides.length) {\n        if (posInit > posX1) {\n          setTransform(transform, lastTrf);\n          return;\n        } else {\n          allowSwipe = true;\n        }\n      }\n\n      if (\n        (posInit > posX1 && transform < nextTrf) ||\n        (posInit < posX1 && transform > prevTrf)\n      ) {\n        reachEdge();\n        return;\n      }\n\n      sliderTrack.style.transform = `translate3d(${\n        transform - posX3\n      }px, 0px, 0px)`;\n    }\n  },\n  swipeEnd = function () {\n    posFinal = posInit - posX1;\n\n    isScroll = false;\n    isSwipe = false;\n\n    document.removeEventListener('touchmove', swipeAction);\n    document.removeEventListener('mousemove', swipeAction);\n    document.removeEventListener('touchend', swipeEnd);\n    document.removeEventListener('mouseup', swipeEnd);\n\n    sliderList.classList.add('grab');\n    sliderList.classList.remove('grabbing');\n\n    if (allowSwipe) {\n      swipeEndTime = Date.now();\n      if (\n        Math.abs(posFinal) > posThreshold ||\n        swipeEndTime - swipeStartTime < 300\n      ) {\n        if (posInit < posX1) {\n          slideIndex--;\n        } else if (posInit > posX1) {\n          slideIndex++;\n        }\n      }\n\n      if (posInit !== posX1) {\n        allowSwipe = false;\n        slide();\n      } else {\n        allowSwipe = true;\n      }\n    } else {\n      allowSwipe = true;\n    }\n  },\n  setTransform = function (transform, comapreTransform) {\n    if (transform >= comapreTransform) {\n      if (transform > comapreTransform) {\n        sliderTrack.style.transform = `translate3d(${comapreTransform}px, 0px, 0px)`;\n      }\n    }\n    allowSwipe = false;\n  },\n  reachEdge = function () {\n    transition = false;\n    swipeEnd();\n    allowSwipe = true;\n  };\n\nsliderTrack.style.transform = 'translate3d(0px, 0px, 0px)';\nsliderList.classList.add('grab');\n\nsliderTrack.addEventListener('transitionend', () => (allowSwipe = true));\nslider.addEventListener('touchstart', swipeStart);\nslider.addEventListener('mousedown', swipeStart);\n\narrows.addEventListener('click', function () {\n  let target = event.target;\n\n  if (target.classList.contains('next')) {\n    slideIndex++;\n  } else if (target.classList.contains('prev')) {\n    slideIndex--;\n  } else {\n    return;\n  }\n\n  slide();\n});\n"],"names":["swipeStartTime","swipeEndTime","slider","document","querySelector","sliderList","sliderTrack","slides","querySelectorAll","arrows","prev","children","next","slideWidth","offsetWidth","slideIndex","posInit","posX1","posX2","posY1","posY2","posFinal","isSwipe","isScroll","allowSwipe","transition","nextTrf","prevTrf","lastTrf","length","posThreshold","trfRegExp","getEvent","event","type","search","touches","slide","style","transform","concat","classList","toggle","swipeStart","evt","Date","now","clientX","clientY","addEventListener","swipeAction","swipeEnd","remove","add","match","posY","Math","abs","setTransform","reachEdge","posX3","removeEventListener","comapreTransform","target","contains"],"version":3,"file":"restaurant-page.10ad7e5d.js.map"}